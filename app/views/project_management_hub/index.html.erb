<div style="margin-top: 20px;" class="container-fluid">
    <div style="display:flex; flex-direction: row; justify-content: space-between; align-items: center;">
        <div>
            <h1>Project Management Hub</h1>
        </div>
        <div>
            <button class="btn btn-success" id="openProjectModal">Create New Project</button>
        </div>
    </div>
  <div class="d-flex justify-content-between align-items-center">
  <% if @projects.any? %>
  <div class="d-flex flex-wrap mt-5" style="gap: 20px;">
    <% @projects.each do |project| %>
      <div class="card mb-3 flex-item" style="min-width:450px">
        <div class="card-header">
            <div style="display:flex; flex-direction: row; justify-content: space-between; align-items: center; margin-bottom: 3px;">
                <div>
                    <h5><%= project.name %></h5>
                </div>
                <div>
                    <a href="/projects/<%= project.id %>/dashboard" class="btn btn-primary">View Project</a>
                </div>
            </div>
        </div>
        <div class="card-body">
              <div class="row">
                <div class="col-sm-3 text-secondary">
                  Description
                </div>
                <div class="col-sm-8">
                  <%= project.description %>
                </div>
              </div>
              <div class="row">
                <div class="col-sm-3 text-secondary">
                  Status
                </div>
                <div class="col-sm-8">
                  <span class="<%= project.status.titleize == 'Active' ? 'text-success' : 'text-danger' %>">
                  <%= project.status.titleize %> </span>
                </div>
              </div>
              <div class="row">
                <div class="col-sm-3 text-secondary">
                  Objectives
                </div>
                <div class="col-sm-8">
                  <%= project.objectives %>
                </div>
              </div>
        </div>
      </div>
    <% end %>
</div>
<% else %>
    <h3 class="mt-5">Get Stated. Create a New Project.</h3>
<% end %>
      <%= render 'new' %>
</div>

<script>
    document.addEventListener('DOMContentLoaded', function() {
        var openModalButton = document.getElementById('openProjectModal');
        openModalButton.addEventListener('click', function() {
        $('#projectModal').modal('show');
        });
    });

    document.addEventListener('DOMContentLoaded', function() {
    var modal = document.getElementById("projectModal");
    var btn = document.getElementById("openProjectModal");
    var span = document.getElementsByClassName("close")[0];
    var errorMessage = document.getElementById('error-message');

    btn.onclick = function() {
        modal.style.display = "block";
    }

    span.onclick = function() {
        modal.style.display = "none";
    }

    window.onclick = function(event) {
        if (event.target == modal) {
        modal.style.display = "none";
        }
    }

    if (errorMessage) {
        var message = errorMessage.getAttribute('data-error');
        alert(message);
    }
    });
</script>
</div>
